

%% Data
SHITOMASI.count = [125,118,123,120,120,113,114,123,111,112];
SHITOMASI.time = [14.4764,12.2352,13.0547,12.3504,12.0406,12.391,12.647,12.8924,12.7963,13.9232];
SHITOMASI.distribution = "Most on sign and car seats";
SHITOMASI.mean_size = 4;
SHITOMASI.BRISK.count = [95,88,80,90,82,79,85,86,82];
SHITOMASI.BRISK.time = [1.71956,1.18236,1.5198,1.49408,1.48808,1.63158,1.62625,1.67947,1.72572,1.65125];
SHITOMASI.BRIEF.count = [115,111,104,101,102,102,100,109,100];
SHITOMASI.BRIEF.time = [4.07837,2.39605,0.889059,0.93289,0.854333,0.854665,0.908508,0.880913,0.893232,0.951561];
SHITOMASI.ORB.count = [104,103,100,102,103,98,98,102,97];
SHITOMASI.ORB.time = [3.11225,2.7733,2.94144,3.17775,3.15266,2.77141,3.20343,3.26929,2.87838,3.01969];
SHITOMASI.FREAK.count = [ 90,88,87,89,83,78,81,86,84];
SHITOMASI.FREAK.time = [ 38.2839,29.8723,28.877,29.4497,29.5222,31.044,31.5575,30.8333,30.1187,30.3693];
SHITOMASI.AKAZE.count = [];
SHITOMASI.AKAZE.time = [];
SHITOMASI.SIFT.count = [112,109,104,103,99,101,96,106,97];
SHITOMASI.SIFT.time = [15.0132,15.8745,15.4888,15.7192,15.8437,16.2696,16.3241,15.3483,15.7931,15.5423];

HARRIS.count = [17,14,18,21,26,43,18,31,26,34];
HARRIS.time = [14.1606,12.7707,11.8688,11.9412,12.0433,21.2767,12.0094,13.4269,12.3421,17.313];
HARRIS.distribution = "Lights and car seats";
HARRIS.mean_size = 6;
HARRIS.BRISK.count = [12,10,14,15,16,16,15,23,21];
HARRIS.BRISK.time = [0.788194,0.745281,0.738392,0.825596,0.839417,0.923067,0.74527,0.83247,0.971367,0.975597];
HARRIS.BRIEF.count = [ 14,11,15,20,24,26,16,24,23];
HARRIS.BRIEF.time = [7.80865,5.19657,2.71079,1.49794,1.28546,1.09904,1.18255,1.19102,1.13353,1.14699];
HARRIS.ORB.count = [12,13,16,18,24,18,15,24,20];
HARRIS.ORB.time = [3.27141,2.89913,3.14456,3.29259,2.8035,2.70241,2.65327,2.7846,3.34701,2.72607];
HARRIS.FREAK.count = [ 13,13,15,15,17,20,14,21,18];
HARRIS.FREAK.time = [32.203,28.5588,29.1968,28.9654,28.3509,29.017,28.706,28.5977,30.3857,30.8169];
HARRIS.AKAZE.count = [];
HARRIS.AKAZE.time = [];
HARRIS.SIFT.count = [14,11,16,19,22,22,13,24,22];
HARRIS.SIFT.time = [15.8221,9.80391,9.53097,9.52093,10.0412,10.0362,10.1312,10.6998,10.2373,9.99341];

FAST.count = [419,427,404,423,386,414,418,406,396,401];
FAST.time = [2.61456,1.89478,2.04945,1.97811,1.929,2.24794,2.11969,2.01872,1.97115,2.01253];
FAST.distribution = "Good spead on both sign and edges of car";
FAST.mean_size = 7;
FAST.BRISK.count = [256,243,241,239,215,251,248,243,247];
FAST.BRISK.time = [3.80542,3.45771,3.2572,3.4989,3.06165,3.24142,3.30894,3.15028,3.0894,3.79229];
FAST.BRIEF.count = [320,332,299,331,276,327,324,315,307];
FAST.BRIEF.time = [7.80865,5.19657,2.71079,1.49794,1.28546,1.09904,1.18255,1.19102,1.13353,1.14699];
FAST.ORB.count = [306,314,295,318,284,312,323,306,304];
FAST.ORB.time = [4.15247,3.42759,3.73888,3.41109,3.62728,3.23315,3.39723,3.23678,3.27038,3.23863];
FAST.FREAK.count = [ 251,250,228,252,234,269,252,243,246];
FAST.FREAK.time = [36.7663,34.952,31.4492,31.5415,31.2731,30.7445,30.5679,31.5637,30.6993,30.7228];
FAST.AKAZE.count = [];
FAST.AKAZE.time = [];
FAST.SIFT.count = [316,325,297,311,291,326,315,300,301];
FAST.SIFT.time = [23.0831,19.853,19.5982,20.9018,19.6689,20.6272,20.6985,20.9827,22.8624,21.4046];


BRISK.count = [264,282,282,277,297,279,289,272,266,254,];
BRISK.time = [251.099,233.985,235.488,234.31,235.807,243.103,252.39,275.718,253.377,276.567];
BRISK.distribution = "Most along car edges";
BRISK.mean_size = 7;
BRISK.BRISK.count = [171,176,157,176,174,188,173,171,184];
BRISK.BRISK.time = [2.65936,2.34167,2.54131,2.62767,2.45953,2.5873,2.80294,2.53293,2.61562,2.42793];
BRISK.BRIEF.count = [178,205,185,179,183,195,207,189,183];
BRISK.BRIEF.time = [1.23849,0.737277,0.799503,0.760802,0.979722,0.948757,0.890772,0.764566,0.82273,0.776096];
BRISK.ORB.count = [160,171,157,170,154,180,171,175,172];
BRISK.ORB.time = [10.6325,9.48157,11.0359,11.1001,10.2137,10.4877,11.0217,11.2825,9.92125,13.1539];
BRISK.FREAK.count = [160,178,156,173,160,183,169,179,168];
BRISK.FREAK.time = [32.4469,31.9246,32.2381,31.5976,30.1852,32.1106,31.3245,33.0383,31.7956,34.4402];
BRISK.AKAZE.count = [];
BRISK.AKAZE.time = [];
BRISK.SIFT.count = [182,193,169,183,171,195,194,176,183];
BRISK.SIFT.time = [26.2205,25.4226,24.3137,21.8727,26.2521,23.5189,25.0485,23.0582,26.1811,23.53];

ORB.count = [92,102,106,113,109,125,130,129,127,128];
ORB.time = [11.2322,6.39952,6.51143,6.21048,5.68168,7.27476,6.91363,6.43269,8.3288,6.8996];
ORB.distribution = "Most along car edges";
ORB.mean_size = 55.6;
ORB.BRISK.count = [73,74,79,85,79,92,90,88,91];
ORB.BRISK.time = [ 1.34741,1.0297,0.962382,1.06728,1.01591,1.13267,1.16556,1.17258,1.15238,2.25583];
ORB.BRIEF.count = [178,205,185,179,183,195,207,189,183];
ORB.BRIEF.time = [ 1.23849,0.737277,0.799503,0.760802,0.979722,0.948757,0.890772,0.764566,0.82273,0.776096];
ORB.ORB.count = [65,69,71,85,91,101,95,93,91];
ORB.ORB.time = [12.1292,11.1455,10.1488,10.3945,10.6057,9.95899,10.3888,10.3035,10.3083,10.1518];
ORB.FREAK.count = [42,36,45,47,44,51,52,49,55];
ORB.FREAK.time = [32.9629,33.3242,30.5514,29.4145,30.9115,29.5403,30.1263,28.9199,28.708,29.8567];
ORB.AKAZE.count = [];
ORB.AKAZE.time = [];
ORB.SIFT.count = [67,79,78,79,82,95,95,94,94];
ORB.SIFT.time = [34.4821,27.0574,28.527,28.3822,25.5027,27.0797,27.326,30.2052,30.6036,28.4337];

AKAZE.count = [166,157,161,155,163,164,173,175,177,179];
AKAZE.time = [60.5518,56.5862,56.023,53.6167,47.9323,49.3895,55.3243,60.0879,56.6724,62.0722];
AKAZE.distribution = "Most along car edges";
AKAZE.mean_size = 7;
AKAZE.BRISK.count = [137,125,129,129,131,132,142,146,144];
AKAZE.BRISK.time = [60.5518,56.5862,56.023,53.6167,47.9323,49.3895,55.3243,60.0879,56.6724,62.0722];
AKAZE.BRIEF.count = [141,134,131,130,134,146,150,148,152];
AKAZE.BRIEF.time = [1.1174,0.562064,0.586957,0.577798,0.590885,0.59051,0.634302,0.584869,0.580562,0.602698];
AKAZE.ORB.count = [130,129,128,115,132,132,137,137,146];
AKAZE.ORB.time = [6.95888,8.28211,7.66739,7.36061,7.39659,7.48994,7.27967,7.50948,7.29298,7.18618];
AKAZE.FREAK.count = [126,128,128,121,123,132,145,148,137];
AKAZE.FREAK.time = [29.8412,30.0805,29.8736,29.6725,29.0879,29.5743,30.7157,29.9557,32.614,31.4153];
AKAZE.AKAZE.count = [138,138,133,127,129,146,147,151,150];
AKAZE.AKAZE.time = [37.2083,37.7998,37.1328,44.5452,44.684,38.4155,42.4546,43.2114,41.3762,38.8226];
AKAZE.SIFT.count = [134,134,130,136,137,147,147,154,151];
AKAZE.SIFT.time = [15.4522,17.2143,16.431,16.241,16.3671,16.2042,16.3603,16.1093,15.8327,16.2046];

SIFT.count = [166,157,161,155,163,164,173,175,177,179];
SIFT.time = [60.5518,56.5862,56.023,53.6167,47.9323,49.3895,55.3243,60.0879,56.6724,62.0722];
SIFT.distribution = "Both car edges and sign";
SIFT.mean_size = 4.4;
SIFT.BRISK.count = [137,125,129,129,131,132,142,146,144];
SIFT.BRISK.time = [ 1.51453,1.37176,1.36427,1.47757,1.39519,1.69048,1.61328,1.61363,1.79513,1.71992];
SIFT.BRIEF.count = [86,78,76,85,69,74,76,70,88];
SIFT.BRIEF.time = [1.00848,0.975848,0.959638,1.059,1.13567,1.1673,1.17784,1.18409,1.25278,0.96206];
SIFT.ORB.count = [];
SIFT.ORB.time = [];
SIFT.FREAK.count = [64,72,65,66,63,58,64,65,79,];
SIFT.FREAK.time = [31.9608,34.764,35.6151,35.4273,35.7124,35.7797,36.2104,35.6896,37.1958,35.1329];
SIFT.AKAZE.count = [];
SIFT.AKAZE.time = [];
SIFT.SIFT.count = [82,81,85,93,90,81,82,102,104];
SIFT.SIFT.time = [55.6255,60.6934,60.6745,60.9719,62.6126,61.8094,64.5651,62.6434,61.4578,62.9199];

%% MP.7 Performance Evaluation 1
figure(1);clf(1);
detections = [SHITOMASI.count', HARRIS.count', FAST.count', BRISK.count', ORB.count', AKAZE.count', SIFT.count'];
detectors = {'SHITOMASI', 'HARRIS', 'FAST', 'BRISK', 'ORB', 'AKAZE', 'SIFT'};
% descriptors = {'BRISK', 'BRIEF', 'ORB', 'FREAK', 'AKAZE', 'SIFT'};
boxplot(detections,'Notch','off','Labels',detectors)
ylabel("Keypoint detection count"); 
xlabel("Keypoint detectors"); 


%% MP.8 Performance Evaluation 2
figure(2);clf(2);
detectors = {'SHITOMASI', 'HARRIS', 'FAST', 'BRISK', 'ORB', 'AKAZE', 'SIFT'};
descriptors = {'BRISK', 'BRIEF', 'ORB', 'FREAK', 'AKAZE', 'SIFT'};

matches = [SHITOMASI.BRISK.count', HARRIS.BRISK.count', FAST.BRISK.count', BRISK.BRISK.count', ORB.BRISK.count', AKAZE.BRISK.count', SIFT.BRISK.count'];
plot(mean(matches), 'o');
hold on
matches = [SHITOMASI.BRIEF.count', HARRIS.BRIEF.count', FAST.BRIEF.count', BRISK.BRIEF.count', ORB.BRIEF.count', AKAZE.BRIEF.count', SIFT.BRIEF.count'];
plot(mean(matches), 'd');
matches = [SHITOMASI.ORB.count', HARRIS.ORB.count', FAST.ORB.count', BRISK.ORB.count', ORB.ORB.count', AKAZE.ORB.count', 1e6*ones(9,1)];
plot(mean(matches), '+');
matches = [SHITOMASI.FREAK.count', HARRIS.FREAK.count', FAST.FREAK.count', BRISK.FREAK.count', ORB.FREAK.count', AKAZE.FREAK.count', SIFT.FREAK.count'];
plot(mean(matches), '.');
matches = [1e6*ones(9,1), 1e6*ones(9,1), 1e6*ones(9,1), 1e6*ones(9,1), 1e6*ones(9,1), AKAZE.AKAZE.count', 1e6*ones(9,1)];
plot(mean(matches), 'x');
matches = [SHITOMASI.SIFT.count', HARRIS.SIFT.count', FAST.SIFT.count', BRISK.SIFT.count', ORB.SIFT.count', AKAZE.SIFT.count', SIFT.SIFT.count'];
plot(mean(matches), '*');
xticklabels(detectors)
ylabel('Mean match count')
xlabel("Keypoint detectors"); 
legend(descriptors);
xlim([0.5,7.5])
ylim([0, 400])

%% MP.9 Performance Evaluation 3
figure(3);clf(3);
detectors = {'SHITOMASI', 'HARRIS', 'FAST', 'BRISK', 'ORB', 'AKAZE', 'SIFT'};
descriptors = {'BRISK', 'BRIEF', 'ORB', 'FREAK', 'AKAZE', 'SIFT'};
detection_time = [SHITOMASI.time', HARRIS.time', FAST.time', BRISK.time', ORB.time', AKAZE.time', SIFT.time'];

match_time = [SHITOMASI.BRISK.time', HARRIS.BRISK.time', FAST.BRISK.time', BRISK.BRISK.time', ORB.BRISK.time', AKAZE.BRISK.time', SIFT.BRISK.time'];
semilogy(mean(match_time) + mean(detection_time), 'o');
hold on
match_time = [SHITOMASI.BRIEF.time', HARRIS.BRIEF.time', FAST.BRIEF.time', BRISK.BRIEF.time', ORB.BRIEF.time', AKAZE.BRIEF.time', SIFT.BRIEF.time'];
semilogy(mean(match_time) + mean(detection_time), 'd');
match_time = [SHITOMASI.ORB.time', HARRIS.ORB.time', FAST.ORB.time', BRISK.ORB.time', ORB.ORB.time', AKAZE.ORB.time', 1e6*ones(10,1)];
detection_time = [SHITOMASI.time', HARRIS.time', FAST.time', BRISK.time', ORB.time', AKAZE.time', SIFT.time'];
semilogy(mean(match_time) + mean(detection_time), '+');
match_time = [SHITOMASI.FREAK.time', HARRIS.FREAK.time', FAST.FREAK.time', BRISK.FREAK.time', ORB.FREAK.time', AKAZE.FREAK.time', SIFT.FREAK.time'];
semilogy(mean(match_time) + mean(detection_time), '.');
match_time = [1e6*ones(10,1), 1e6*ones(10,1), 1e6*ones(10,1), 1e6*ones(10,1), 1e6*ones(10,1), AKAZE.AKAZE.time', 1e6*ones(10,1)];
semilogy(mean(match_time), 'x');
match_time = [SHITOMASI.SIFT.time', HARRIS.SIFT.time', FAST.SIFT.time', BRISK.SIFT.time', ORB.SIFT.time', AKAZE.SIFT.time', SIFT.SIFT.time'];
semilogy(mean(match_time) + mean(detection_time), '*');
xticklabels(detectors)
ylabel('Mean match time [ms]')
xlabel("Keypoint detectors"); 
legend(descriptors);
xlim([0.5,7.5])
ylim([0, 1e3])

